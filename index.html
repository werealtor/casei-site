<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Minimal Toggle Test</title>

<!-- è·Ÿéšç³»ç»Ÿçš„ä¸»é¢˜å…ƒä¿¡æ¯ï¼ˆéå¿…éœ€ï¼‰ -->
<meta name="color-scheme" content="light dark">
<meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#0b0b0b" media="(prefers-color-scheme: dark)">

<style>
  /* ====== æœ€å°æ ·å¼ï¼Œå†…è”ï¼Œé¿å…è·¯å¾„é—®é¢˜ ====== */
  :root{
    --bg:#ffffff; --text:#111; --line:#eaeaea;
  }
  html[data-theme="dark"]{
    --bg:#0b0b0b; --text:#f5f5f5; --line:#333;
  }
  *{box-sizing:border-box}
  html,body{margin:0;height:100%}
  body{
    display:flex;align-items:center;justify-content:center;
    background:var(--bg); color:var(--text); font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    transition:background .2s,color .2s;
  }
  h1{font-size:20px;font-weight:600;margin:0 12px;text-align:center}

  /* æ‚¬æµ®æŒ‰é’®ï¼ˆæ­£å¼æ ·å¼ï¼‰ */
  .floating-toggle{
    position:fixed; right:20px; bottom:20px;
    width:48px; height:48px; border-radius:50%;
    display:flex; align-items:center; justify-content:center;
    background:var(--bg); color:var(--text);
    border:1px solid var(--line);
    box-shadow:0 6px 18px rgba(0,0,0,.15);
    font-size:22px; cursor:pointer;
    z-index:9999; transition:transform .18s ease;
  }
  .floating-toggle:hover{ transform:scale(1.08) }
</style>
</head>
<body>
  <h1>æœ€å°æµ‹è¯•é¡µï¼ˆåº”æ˜¾ç¤ºå³ä¸‹è§’ ğŸŒ™/â˜€ï¸ æŒ‰é’®ï¼‰</h1>

  <!-- æ‚¬æµ®æŒ‰é’®ï¼ˆæ­£å¼ï¼‰ -->
  <button id="themeToggle" class="floating-toggle" aria-label="Toggle theme" title="åˆ‡æ¢æµ…/æ·±è‰²">ğŸŒ™</button>

<script>
/* ====== ä¸»é¢˜åˆ‡æ¢é€»è¾‘ï¼ˆè®°å¿†é€‰æ‹©ï¼‰ ====== */
(function(){
  const btn = document.getElementById('themeToggle');
  if(!btn) return;

  const saved = localStorage.getItem('theme');
  const setIcon = m => btn.textContent = (m==='dark' ? 'â˜€ï¸' : 'ğŸŒ™');

  if(saved){
    document.documentElement.setAttribute('data-theme', saved);
    setIcon(saved);
  }else if(window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches){
    document.documentElement.setAttribute('data-theme','dark'); setIcon('dark');
  }else{
    setIcon('light');
  }

  btn.addEventListener('click', ()=>{
    const cur = document.documentElement.getAttribute('data-theme') || 'light';
    const next = cur === 'dark' ? 'light' : 'dark';
    document.documentElement.setAttribute('data-theme', next);
    localStorage.setItem('theme', next);
    setIcon(next);
  });
})();

/* ====== DEBUG å¼ºåˆ¶å‡ºç°æŒ‰é’®ï¼ˆå¦‚æœä¸Šé¢æŒ‰é’®æ²¡è¢«æ¸²æŸ“/è¢«åˆ ï¼‰ ======
   è¿™æ®µä¼šåœ¨æ‰¾ä¸åˆ° #themeToggle æ—¶ï¼Œæ³¨å…¥ä¸€ä¸ªçº¢é»„å¤§æŒ‰é’®ï¼Œç¡®ä¿ä½ ä¸€å®šèƒ½â€œçœ‹è§ä¸œè¥¿â€ã€‚
*/
(function(){
  if(document.getElementById('themeToggle')) return; // å·²å­˜åœ¨å°±ä¸æ’
  const btn = document.createElement('button');
  btn.id = 'themeToggle';
  btn.textContent = 'ğŸŒ™';
  Object.assign(btn.style, {
    position:'fixed',right:'20px',bottom:'20px',width:'80px',height:'80px',
    borderRadius:'12px',background:'red',color:'#fff',fontSize:'36px',
    fontWeight:'700',border:'4px solid yellow',boxShadow:'0 10px 30px rgba(0,0,0,.25)',
    zIndex:'2147483647',cursor:'pointer'
  });
  document.body.appendChild(btn);
})();
</script>

<!-- BUILD MARK: 2025-09-22-minimal-test -->
</body>
</html>